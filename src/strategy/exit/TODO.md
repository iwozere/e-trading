–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî **multi-TF ATR trailing** –∫–∞–∫ —Ä–∞–∑ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π –∏–∑—ä—è–Ω –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞, –æ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ—è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—å–µ:
üëâ *¬´—Ä—ã–Ω–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è, –∞ —Å—Ç–æ–ø ‚Äî –Ω–µ—Ç¬ª*.

–ù–∏–∂–µ —Ä–∞–∑–±–µ—Ä—ë–º **–≥–ª—É–±–æ–∫–æ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ**, –±–µ–∑ –≤–æ–¥—ã, —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏ –∏ Backtrader-–ª–æ–≥–∏–∫–æ–π.

---

# üß† –ü—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω–æ–≥–æ ATR-trailing

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:

```
stop = high_since_entry - ATR(tf) * k
```

‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* ATR –Ω–∞ –æ–¥–Ω–æ–º TF:

  * **—Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ** –Ω–∞ –º–ª–∞–¥—à–∏—Ö –¢–§ ‚Üí –≤—ã–±–∏–≤–∞–µ—Ç —à—É–º–æ–º
  * **—Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ** –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö ‚Üí –æ—Ç–¥–∞—ë—à—å –ø—Ä–∏–±—ã–ª—å
* ATR **–Ω–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞**
* –ü—Ä–∏ —Å–º–µ–Ω–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç–æ–ø ¬´–Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç¬ª, —á—Ç–æ –¥–µ–ª–∞—Ç—å

üëâ –í –∏—Ç–æ–≥–µ:

* —Ç—Ä–µ–Ω–¥—ã —Ä–≤—É—Ç—Å—è —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏
* –≤ –±–æ–∫–æ–≤–∏–∫–µ —Å—Ç–æ–ø—ã –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã

---

# üü£ –ß—Ç–æ —Ç–∞–∫–æ–µ Multi-TF ATR Trailing (–∏–¥–µ—è)

**–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º ATR —Å —Ä–∞–∑–Ω—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á.**

| –¢–∞–π–º—Ñ—Ä–µ–π–º ATR      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                  |
| ------------------ | --------------------------- |
| HTF ATR (H4 / D1)  | *–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ø*       |
| LTF ATR (M5 / M15) | *–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–π–ª–∏–Ω–≥*      |
| Micro TF ATR       | *Break-even / –∑–∞—â–∏—Ç–∞ –≤—Ö–æ–¥–∞* |

–≠—Ç–æ **–∏–µ—Ä–∞—Ä—Ö–∏—è —Å—Ç–æ–ø–æ–≤**, –∞ –Ω–µ –æ–¥–∏–Ω —Å—Ç–æ–ø.

---

# üß© –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ (–ª–æ–Ω–≥, spot)

```
entry_price

S0 = entry - ATR_HTF * K0      ‚Üê –∞–≤–∞—Ä–∏–π–Ω—ã–π —Å—Ç–æ–ø
S1 = highest - ATR_LTF * K1    ‚Üê —Ä–∞–±–æ—á–∏–π —Ç—Ä–µ–π–ª–∏–Ω–≥
S2 = entry + ATR_micro * K2   ‚Üê break-even
```

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ø:

```
STOP = max(S0, S1, S2)
```

‚û°Ô∏è —Å—Ç–æ–ø **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è**, —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è.

---

# üîµ –†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ –∏ ATR

### 1Ô∏è‚É£ –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥

* –∏—Å–ø–æ–ª—å–∑—É–µ–º **LTF ATR**
* ATR —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è ‚Üí —Å—Ç–æ–ø —Å–∂–∏–º–∞–µ—Ç—Å—è
* –ø—Ä–∏–±—ã–ª—å —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

### 2Ô∏è‚É£ –ò–º–ø—É–ª—å—Å / –Ω–æ–≤–æ—Å—Ç–∏

* **HTF ATR –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç**
* –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –≤—ã–±–∏–≤–∞–Ω–∏—è —à–∏–ø–∞–º–∏

### 3Ô∏è‚É£ –§–ª—ç—Ç

* —Ç—Ä–µ–π–ª–∏–Ω–≥ –ø–æ—á—Ç–∏ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è
* –ª–∏–±–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è tight-—Ä–µ–∂–∏–º

---

# üìê –§–æ—Ä–º—É–ª—ã (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ)

–ü—É—Å—Ç—å:

* ATR_D = ATR(data1) ‚Äî 4H / D1
* ATR_H = ATR(data0) ‚Äî 15m
* ATR_M = ATR(data_micro) ‚Äî 1m (–æ–ø—Ü.)

### –°—Ç–æ–ø—ã:

```
S0 = entry - ATR_D * 2.5
S1 = highest_close - ATR_H * 2.0
S2 = entry + ATR_M * 0.5
```

---

# ‚öôÔ∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Backtrader

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```python
data15 = bt.feeds.PandasData(dataname=df15)
data4h  = bt.feeds.PandasData(dataname=df4h)

cerebro.adddata(data15)   # data0
cerebro.adddata(data4h)   # data1
```

---

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

```python
self.atr_ltf = bt.ind.ATR(self.data0, period=14)
self.atr_htf = bt.ind.ATR(self.data1, period=14)

self.highest = bt.ind.Highest(self.data0.high, period=100)
```

---

### –õ–æ–≥–∏–∫–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ (–∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å)

```python
def update_trailing_stop(self):
    s0 = self.entry_price - self.atr_htf[0] * 2.5
    s1 = self.highest[0] - self.atr_ltf[0] * 2.0

    # break-even
    if self.data0.close[0] > self.entry_price + self.atr_ltf[0]:
        s2 = self.entry_price + self.atr_ltf[0] * 0.3
    else:
        s2 = -float('inf')

    self.stop_price = max(s0, s1, s2)
```

---

### –í—ã—Ö–æ–¥

```python
if self.data0.close[0] < self.stop_price:
    self.close()
```

---

# üü† –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (–æ—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

## üîÅ ATR-of-ATR (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å–º–µ–Ω–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏)

```
vol_ratio = ATR_LTF / SMA(ATR_LTF)
k_dynamic = base_k * vol_ratio
```

‚û°Ô∏è —Ä—ã–Ω–æ–∫ —É—Å–∫–æ—Ä–∏–ª—Å—è ‚Üí —Å—Ç–æ–ø –¥–∞–ª—å—à–µ
‚û°Ô∏è —Ä—ã–Ω–æ–∫ –∑–∞—Ç–∏—Ö ‚Üí —Å—Ç–æ–ø –±–ª–∏–∂–µ

---

## üß† Regime-aware trailing

| –†–µ–∂–∏–º     | ATR     |
| --------- | ------- |
| Trend     | LTF     |
| Vol spike | HTF     |
| Flat      | BE only |

---

## üîí –ê–Ω—Ç–∏-–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä

–ò—Å–ø–æ–ª—å–∑—É–π:

* `close`, –Ω–µ `low`
* –∏–ª–∏ `HL2`
* –∏–ª–∏ –º–µ–¥–∏–∞–Ω—É

—á—Ç–æ–±—ã –Ω–µ –ª–æ–≤–∏—Ç—å —Ñ–∏—Ç–∏–ª–∏.

---

# üìä –ü–æ—á–µ–º—É —ç—Ç–æ **–ª—É—á—à–µ –æ–±—ã—á–Ω–æ–≥–æ ATR**

| –ö—Ä–∏—Ç–µ—Ä–∏–π                 | Single TF ATR | Multi-TF ATR |
| ------------------------ | ------------- | ------------ |
| –£–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞         | ‚ùå             | ‚úÖ            |
| –ó–∞—â–∏—Ç–∞ –æ—Ç —à–∏–ø–æ–≤          | ‚ùå             | ‚úÖ            |
| –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ä—ã–Ω–∫—É        | ‚ùå             | ‚úÖ            |
| –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–µ–∂–∏–º–∞–º–∏ | ‚ùå             | ‚úÖ            |

---

# üß† –°–≤—è–∑—å —Å–æ —Å—Ç–∞—Ç—å—ë–π

–°—Ç–∞—Ç—å—è –≥–æ–≤–æ—Ä–∏—Ç:

> ¬´–¢—Ä–µ–Ω–¥ –µ—Å—Ç—å, –Ω–æ –æ–Ω —É—Å–∫–æ–ª—å–∑–∞–µ—Ç¬ª

Multi-TF ATR trailing ‚Äî **–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç—Ä–µ–Ω–¥—É ‚Äú–¥—ã—à–∞—Ç—å‚Äù**, –Ω–µ —É–±–∏–≤–∞—è –ø–æ–∑–∏—Ü–∏—é —à—É–º–æ–º –∏ –Ω–µ –æ—Ç–¥–∞–≤–∞—è –ø—Ä–∏–±—ã–ª—å.

---

# üîö –†–µ–∫–æ–º–µ–Ω–¥—É—é —Ç–µ–±–µ

–£—á–∏—Ç—ã–≤–∞—è —Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π —Å–µ—Ç–∞–ø (RSI + BB + ATR, ~60% –≥–æ–¥–æ–≤—ã—Ö):

‚û°Ô∏è **–∑–∞–º–µ–Ω–∏ single ATR trailing –Ω–∞ multi-TF**
‚û°Ô∏è –æ—Å—Ç–∞–≤—å entry –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚û°Ô∏è –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π **—Ç–æ–ª—å–∫–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —Å—Ç–æ–ø–æ–≤**

–ö–æ—Ä–æ—Ç–∫–∏–π –æ—Ç–≤–µ—Ç: **–¥–∞, –º–æ–∂–Ω–æ –∏ –≤ Backtrader —ç—Ç–æ *–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π* –ø—É—Ç—å** üëç
–î–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî **–∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ, –∫–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è –∏ –∫–∞–∫ –¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è **multi-TF ATR trailing**.

---

## ‚úÖ –ú–æ–∂–Ω–æ –ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å HTF –∏–∑ LTF?

**–î–∞.**
–ï—Å–ª–∏ —Ç–≤–æ–π –±–∞–∑–æ–≤—ã–π —Ñ–∏–¥ ‚Äî **15m**, —Ç–æ **4H –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å** –∏–∑ –Ω–µ–≥–æ.

Backtrader **–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –∏ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω**.

---

# üîß –ö–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ Backtrader

## 1Ô∏è‚É£ –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–¢—ã –∑–∞–≥—Ä—É–∂–∞–µ—à—å **–¢–û–õ–¨–ö–û 15m**

```python
data15 = bt.feeds.PandasData(
    dataname=df15,
    timeframe=bt.TimeFrame.Minutes,
    compression=15
)
cerebro.adddata(data15)
```

---

## 2Ô∏è‚É£ –†–µ—Å–µ–º–ø–ª–∏–Ω–≥ –≤ 4H

```python
cerebro.resampledata(
    data15,
    timeframe=bt.TimeFrame.Minutes,
    compression=240   # 4 —á–∞—Å–∞
)
```

–¢–µ–ø–µ—Ä—å:

* `data0` ‚Üí 15m
* `data1` ‚Üí 4H (—Å–æ–±—Ä–∞–Ω –∏–∑ —Ç–µ—Ö –∂–µ –±–∞—Ä–æ–≤)

‚úîÔ∏è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω–∞—è
‚úîÔ∏è –±–µ–∑ lookahead
‚úîÔ∏è –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

---

# üß† –ü–æ—á–µ–º—É —ç—Ç–æ **–ª—É—á—à–µ**, —á–µ–º —Ç—è–Ω—É—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π 4H —Ñ–∏–¥

| –ö—Ä–∏—Ç–µ—Ä–∏–π        | –û—Ç–¥–µ–ª—å–Ω—ã–π HTF | Resample –∏–∑ LTF |
| --------------- | ------------- | --------------- |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è   | ‚ùå —á–∞—Å—Ç–æ –∫—Ä–∏–≤–æ | ‚úÖ –∏–¥–µ–∞–ª—å–Ω–æ      |
| Lookahead —Ä–∏—Å–∫  | ‚ö†Ô∏è –≤–æ–∑–º–æ–∂–µ–Ω   | ‚úÖ –Ω–µ—Ç           |
| –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö | –∑–∞–≤–∏—Å–∏—Ç       | =               |
| –ü—Ä–æ—Å—Ç–æ—Ç–∞        | ‚ùå —Å–ª–æ–∂–Ω–µ–µ     | ‚úÖ –ø—Ä–æ—â–µ         |
| Reproducibility | ‚ùå             | ‚úÖ               |

–î–ª—è **ATR trailing** —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ.

---

# ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ú–û–ú–ï–ù–¢ (–≤–∞–∂–Ω–æ!)

### ‚ùó HTF –±–∞—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´–∑–∞–∫—Ä—ã—Ç—ã–º¬ª —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ –ø–µ—Ä–∏–æ–¥–∞

Backtrader **—Å–∞–º —ç—Ç–æ —Å–æ–±–ª—é–¥–∞–µ—Ç**, –Ω–æ —Ç—ã –¥–æ–ª–∂–µ–Ω:

* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **data1[0]**, –∞ –Ω–µ `[-1]`
* –Ω–µ —á–∏—Ç–∞—Ç—å `data1.close[0]` –¥–æ –º–æ–º–µ–Ω—Ç–∞, –ø–æ–∫–∞ –æ–Ω —Ä–µ–∞–ª—å–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω

üìå Backtrader –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:

> HTF –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–ª–∏—Å—å –≤—Å–µ 15m –±–∞—Ä—ã**

---

# üß© –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ATR HTF, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∏–∑ LTF

```python
self.atr_ltf = bt.ind.ATR(self.data0, period=14)
self.atr_htf = bt.ind.ATR(self.data1, period=14)
```

–†–∞–±–æ—Ç–∞–µ—Ç **–∞–±—Å–æ–ª—é—Ç–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**.

---

# üü£ Multi-TF ATR trailing (—Å resample)

```python
def update_trailing_stop(self):
    s0 = self.entry_price - self.atr_htf[0] * 2.5
    s1 = self.highest_ltf[0] - self.atr_ltf[0] * 2.0

    self.stop_price = max(self.stop_price or -float('inf'), s0, s1)
```

‚úîÔ∏è HTF ATR ‚Äî —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–π
‚úîÔ∏è LTF ATR ‚Äî —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π
‚úîÔ∏è –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø. –¥–∞–Ω–Ω—ã—Ö

---

# üü† –ö–æ–≥–¥–∞ **–ù–ï–õ–¨–ó–Ø** —Ç–∞–∫ –¥–µ–ª–∞—Ç—å

‚ùå –ï—Å–ª–∏:

* —Ç–µ–±–µ –Ω—É–∂–µ–Ω **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π HTF close** (–Ω–∞–ø—Ä–∏–º–µ—Ä, CME daily settlement)
* HTF —Å–æ–¥–µ—Ä–∂–∏—Ç **–≥—ç–ø—ã**, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ LTF
* —Ç—ã —Ç–æ—Ä–≥—É–µ—à—å **–º–µ–∂—Å–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏** (–∞–∫—Ü–∏–∏ –°–®–ê —Å overnight)

–î–ª—è **–∫—Ä–∏–ø—Ç—ã** –∏ **—Å–ø–æ—Ç–∞** ‚Äî **–º–æ–∂–Ω–æ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞**.

---

# üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤—Å—ë –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîç Debug:

```python
if self.data1.datetime[0] != self.data1.datetime[-1]:
    print("HTF updated", self.data1.datetime.datetime(0))
```

–¢—ã —É–≤–∏–¥–∏—à—å, —á—Ç–æ `data1` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ 4 —á–∞—Å–∞.

---

# üß† –°–≤—è–∑—å —Å multi-TF ATR trailing

üí° –ì–ª–∞–≤–Ω—ã–π –ø–ª—é—Å:

* **ATR_HTF –Ω–µ ‚Äú–¥–µ—Ä–≥–∞–µ—Ç—Å—è‚Äù**
* —Ç—Ä–µ–π–ª–∏–Ω–≥ **–ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å —à—É–º–Ω—ã–º**
* —Ç—Ä–µ–Ω–¥—ã –¥–µ—Ä–∂–∞—Ç—Å—è –¥–æ–ª—å—à–µ

---

# üß© –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ç–∞–ø (—Ç–≤–æ–π —Å–ª—É—á–∞–π)

| –ü–∞—Ä–∞–º–µ—Ç—Ä          | –ó–Ω–∞—á–µ–Ω–∏–µ      |
| ----------------- | ------------- |
| Base TF           | 15m           |
| HTF               | 4H (resample) |
| ATR_LTF           | 14            |
| ATR_HTF           | 14            |
| HTF ATR –º–Ω–æ–∂–∏—Ç–µ–ª—å | 2.5‚Äì3.0       |
| LTF ATR –º–Ω–æ–∂–∏—Ç–µ–ª—å | 1.8‚Äì2.2       |

---

# üîö –í—ã–≤–æ–¥ (—á—ë—Ç–∫–æ)

‚úÖ **–î–∞, –¥–µ–ª–∞–π HTF –∏–∑ LTF**
‚úÖ **Backtrader ‚Äî –Ω–∞—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ**
‚úÖ **–î–ª—è multi-TF ATR trailing —ç—Ç–æ –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç**
‚ö†Ô∏è –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–±—ã–≤–∞–π: HTF ¬´–º–µ–¥–ª–µ–Ω–Ω—ã–π –∏ —Ç—è–∂–µ–ª—ã–π¬ª, LTF ¬´–±—ã—Å—Ç—Ä—ã–π –∏ –Ω–µ—Ä–≤–Ω—ã–π¬ª

---
